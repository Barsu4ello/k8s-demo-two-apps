plugins {
    id 'java'
    id 'org.springframework.boot' version '3.4.1'
    id 'io.spring.dependency-management' version '1.1.7'
}

group = 'com.example'
version = '0.0.1-SNAPSHOT'

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
}

//tasks.jar.enabled = false

bootJar {
    archiveFileName = 'k8s.jar'
}
//jar {
//    archiveFileName='k8s.jar'
//
////    def jars = configurations.runtimeClasspath.getFiles().collect{"lib/$it.name"}
//
//    duplicatesStrategy(DuplicatesStrategy.EXCLUDE)
//    manifest{
//        attributes 'Main-Class': 'com/example/k8sdemo/K8sDemoApplication'
////                    'Class-Path': jars.join(' ')
//    }
//
//    from(configurations.runtimeClasspath.getFiles().collect{zipTree(it)})
//
//}

//task copyAllDependencies(type: Copy) {
//    from(configurations.runtimeClasspath.getFiles())
//    into("$buildDir/libs/lib")
//}
//
//jar.dependsOn copyAllDependencies
